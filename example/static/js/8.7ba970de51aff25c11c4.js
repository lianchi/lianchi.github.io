webpackJsonp([8],{"464s":function(e,t,s){t=e.exports=s("FZ+f")(!1),t.push([e.i,".show-resource[data-v-ed84d282]{color:#838fa5;font-weight:700}.show-resource[data-v-ed84d282]:hover{color:#13ce66}.bind-resource[data-v-ed84d282]{color:#838fa5}.bind-resource[data-v-ed84d282]:hover{color:#ffd04b}.unbind-resource[data-v-ed84d282]{color:#838fa5}.unbind-resource[data-v-ed84d282]:hover{color:#e57373}",""])},AW4Y:function(e,t,s){var a=s("464s");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("3126e4cb",a,!0)},"WP+U":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.isVisible,width:"80%","before-close":e.hidden,title:this.$t("sys.aaMG.bindResource")},on:{close:e.hidden,"update:visible":function(t){e.isVisible=t}}},[s("div",{staticClass:"toolbar"},[s("el-select",{staticStyle:{width:"280px"},attrs:{filterable:"",clearable:"",placeholder:this.$t("sys.aaMG.resType")},model:{value:e.filters.classification,callback:function(t){e.$set(e.filters,"classification",t)},expression:"filters.classification"}},e._l(e.resourceTypeOptions,function(e){return s("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})})),e._v(" "),s("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:e.searchBtn.type,icon:e.searchBtn.icon,disabled:e.searchBtn.disabled},nativeOn:{click:function(t){e.searchBtn.click(t)}}},[e._v(e._s(e.$t("button."+e.searchBtn.label))+"\n        ")])],1),e._v(" "),s("CommonTable",e._b({ref:"roleResTable"},"CommonTable",e.tableProps,!1)),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{nativeOn:{click:function(t){e.hidden(t)}}},[e._v(e._s(e.$t("button.cancel")))]),e._v(" "),s("el-button",{attrs:{disabled:e.disabled,loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("button.bind")))])],1)],1)},i=[],o={render:a,staticRenderFns:i};t.a=o},WbfB:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("fWMV"),i=s.n(a),o=s("WP+U"),n=s("VU/8"),l=n(i.a,o.a,!1,null,null,null);t.default=l.exports},XQvX:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"toolbar"},[s("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:this.$t("sys.aaMG.roleName")},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.getData(t)}},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}}),e._v(" "),s("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:e.searchBtn.type,icon:e.searchBtn.icon,disabled:e.searchBtn.disabled,loading:e.searchBtn.loading},nativeOn:{click:function(t){t.preventDefault(),e.searchBtn.click(t)}}},[e._v(e._s(e.$t("button."+e.searchBtn.label))+"\n        ")]),e._v(" "),s("ButtonGroup",e._b({},"ButtonGroup",e.btnsProps,!1))],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.roleTableLoading,expression:"roleTableLoading"}],ref:"roleTable",staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.roleData,stripe:"","show-overflow-tooltip":!0,"highlight-current-row":!0,"tooltip-effect":"dark","max-height":"680"},on:{"selection-change":e.selsChange}},[s("el-table-column",{attrs:{fixed:"",type:"selection",align:"right",width:"45"}}),e._v(" "),s("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),s("el-table-column",{attrs:{prop:"displayName",label:this.$t("sys.aaMG.roleName"),"min-width":"100",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:this.$t("sys.aaMG.bindedResource"),"min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{ref:"resPopover",attrs:{placement:"left",width:"550",trigger:"click"}},[s("el-table",{attrs:{data:t.row.sysResources,stripe:"","highlight-current-row":!0,"max-height":"700"}},[s("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),s("el-table-column",{attrs:{"min-width":"100",prop:"classification",label:e.bindedResource.resType,sortable:""}}),e._v(" "),s("el-table-column",{attrs:{"min-width":"100",prop:"displayName",label:e.bindedResource.resName,sortable:""}}),e._v(" "),s("el-table-column",{attrs:{"min-width":"100",prop:"code",label:e.bindedResource.resCode,sortable:""}})],1)],1),e._v(" "),t.row.sysResources.length>0?s("el-button",{directives:[{name:"popover",rawName:"v-popover:resPopover",arg:"resPopover"}],staticClass:"show-resource",attrs:{type:"text"}},[e._v("\n                    "+e._s(t.row.sysResources.length)+"\n                ")]):s("span",[e._v(e._s(e.$t("sys.aaMG.none")))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:this.$t("sys.aaMG.event"),"min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{attrs:{effect:"dark",content:e.bindTip,placement:"left",enterable:!1}},[s("el-button",{staticClass:"bind-resource",attrs:{type:"text"},on:{click:function(s){e.bindResourceClick(t.row)}}},[e._v("\n                        "+e._s(e.$t("sys.aaMG.bind"))+"\n                    ")])],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:e.unbindTip,placement:"left",enterable:!1}},[t.row.sysResources.length>0?s("el-button",{staticClass:"unbind-resource",attrs:{type:"text"},on:{click:function(s){e.unBindResourceClick(t.row)}}},[e._v("\n                        "+e._s(e.$t("sys.aaMG.unbind"))+"\n                    ")]):e._e()],1)]}}])})],1),e._v(" "),s("div",{staticClass:"common-toolbar-footer"},[s("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalElements},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),e._v(" "),s("CommonDialog",e._b({ref:"dialog"},"CommonDialog",e.dialogProps,!1)),e._v(" "),s("RoleResourceDialog",e._b({on:{updateIsVisible:e.changeVisible,updateResource:e.updateResource}},"RoleResourceDialog",e.resourceDialog,!1))],1)},i=[],o={render:a,staticRenderFns:i};t.a=o},fWMV:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("/4KT"),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=s("CTKg"),n=s("RUjS");s("0nCa");t.default={components:{CommonTable:i.default,generateButton:n.generateButton},props:["isVisible"],data:function(){var e=this;return{filters:{classification:""},resourceTypeOptions:[],searchBtn:(0,n.generateButton)("search","el-icon-search","primary",this.getData),loading:!1,disabled:!0,tableProps:{sels:[],data:[],showSels:!0,showPage:!0,pageSize:10,pageSizes:[10,25,50],currentPage:1,totalElements:0,columns:[{label:this.$t("sys.aaMG.resType"),prop:"classification",size:"",sortable:!0,sortMethod:function(e,t){return e.classification>t.classification}},{label:this.$t("sys.aaMG.resName"),prop:"displayName",size:""},{label:this.$t("sys.aaMG.resCode"),prop:"code",size:""}],loading:!1,selsChange:function(t){e.tableProps.sels=t,e.disabled=t.length<1},sizeChange:function(t){e.tableProps.pageSize=t,e.getData()},currentChange:function(t){e.tableProps.currentPage=t,e.getData()}}}},mounted:function(){this.getResourceTypes(),this.getData()},methods:{getResourceTypes:function(){var e=this;o.sysRequest.getResourceTypes().then(function(t){e.resourceTypeOptions=t.data})},hidden:function(){this.disabled=!0,this.$refs.roleResTable.$refs.table.clearSelection(),this.$emit("updateIsVisible",!1)},submit:function(){var e=this.tableProps.sels.map(function(e){return{id:e.id}});this.$refs.roleResTable.$refs.table.clearSelection(),this.$emit("updateResource",e)},getData:function(){var e=this;this.tableProps.loading=!0;var t={pageNum:this.tableProps.currentPage-1,pageSize:this.tableProps.pageSize,classification:this.filters.classification};o.sysRequest.sysResource.get(t).then(function(t){e.tableProps.data=t.data.content,e.tableProps.totalElements=t.data.totalElements,e.tableProps.loading=!1}).catch(function(){e.tableProps.loading=!1})}}}},ggNv:function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s("woOf"),o=a(i),n=s("E3Iy"),l=a(n),r=s("WbfB"),c=a(r),d=s("fhCn"),u=a(d),p=s("CTKg"),h=s("RUjS"),b=(s("0nCa"),s("E4LH"));t.default={components:{ButtonGroup:u.default,CommonDialog:l.default,RoleResourceDialog:c.default},data:function(){var e=this,t={add:(0,h.generateButton)("add","el-icon-plus","primary",this.plusClick),edit:(0,h.generateButton)("edit","el-icon-edit","primary",this.editClick),del:(0,h.generateButton)("delete","el-icon-delete","danger",this.deleteClick)};return{filters:{name:""},bindTip:this.$t("sys.aaMG.bindResTip"),unbindTip:this.$t("sys.aaMG.unbindResTip"),resourceDialog:{isVisible:!1},roleID:null,bindedResource:{resType:this.$t("sys.aaMG.resType"),resName:this.$t("sys.aaMG.resName"),resCode:this.$t("sys.aaMG.resCode")},btnsProps:{buttonList:t},btns:t,searchBtn:(0,h.generateButton)("search","el-icon-search","primary",this.getData),roleData:[],roleTableLoading:!1,sels:[],currentPage:1,pageSize:10,pageSizes:[10,25,50],totalElements:0,dialogProps:{labelWidth:"100px",width:"40%",type:"",params:{displayName:""},rules:{displayName:[{required:!0,message:this.$t("validate.default"),tigger:"blur"},{validator:b.validateForm.lessThan,message:this.$t("validate.lessThan")}]},itemList:[{label:this.$t("sys.aaMG.roleName")+"ï¼š",kind:"input",type:"text",model:"displayName",inputWidth:"90%"}],title:"",laoding:!1,isVisible:!1,open:function(){},hidden:function(){e.dialogProps.isVisible=!1,e.dialogProps.params={name:""}},submit:function(){e.$refs.dialog.$refs.form.validate(function(t){if(t){var s=e.dialogProps.type,a={id:e.dialogProps.params.id,flag:"roleEdit",body:{displayName:e.dialogProps.params.displayName}};p.sysRequest.sysRole[s](a).then(function(t){e.getData(),e.$message({showClose:!0,message:"add"===s?e.$t("dialog.addDone"):e.$t("dialog.editDone"),type:"success"}),e.dialogProps.hidden()})}})}}}},methods:{selsChange:function(e){this.sels=e,this.btns.edit.disabled=1!==e.length,this.btns.del.disabled=e.length<=0},currentChange:function(e){this.currentPage=e,this.getData()},sizeChange:function(e){this.pageSize=e,this.getData()},plusClick:function(e){this.dialogProps.isVisible=!0,this.dialogProps.type="add",this.dialogProps.title=this.$t("sys.aaMG.addRole")},editClick:function(e){this.dialogProps.isVisible=!0,this.dialogProps.type="edit",this.dialogProps.title=this.$t("sys.aaMG.editRole"),this.dialogProps.params=(0,o.default)({},this.sels[0])},deleteClick:function(e){var t=this;(0,h.confirmAlter)(this,this.$t("dialog.sureDelete"),{success:function(){var e={id:t.sels.map(function(e){return e.id}).toString()};p.sysRequest.sysRole.del(e).then(function(e){t.getData(),t.$message({showClose:!0,type:"success",message:t.$t("dialog.deleteDone")})})}})},changeVisible:function(e){this.resourceDialog.isVisible=!1},bindResourceClick:function(e){this.roleID=e.id,this.resourceDialog.isVisible=!0},unBindResourceClick:function(e){var t=this;(0,h.confirmAlter)(this,this.$t("dialog.sureUnbind"),{success:function(){var s={id:e.id,flag:"resourceClean",body:{}};p.sysRequest.sysRole.edit(s).then(function(e){t.$message({showClose:!0,type:"success",message:t.$t("sys.aaMG.unbind")+t.$t("sys.aaMG.success")}),t.getData()})}})},updateResource:function(e){var t=this,s={id:this.roleID,flag:"resourceBind",body:{sysResources:e}};p.sysRequest.sysRole.edit(s).then(function(e){t.$message({showClose:!0,type:"success",message:t.$t("sys.aaMG.bindResource")+t.$t("sys.aaMG.success")}),t.resourceDialog.isVisible=!1;var s=t.$route.path;t.$router.push({currentPath:s,query:{t:+new Date}})})},getData:function(){var e=this;this.roleTableLoading=!0,this.btns.edit.disabled=!0,this.btns.del.disabled=!0;var t={pageNum:this.currentPage-1,pageSize:this.pageSize,displayName:this.filters.name};p.sysRequest.sysRole.get(t).then(function(t){e.roleData=t.data.content,e.totalElements=t.data.totalElements,e.roleTableLoading=!1}).catch(function(){e.roleTableLoading=!1})}},mounted:function(){this.getData()}}},xcZo:function(e,t,s){"use strict";function a(e){s("AW4Y")}Object.defineProperty(t,"__esModule",{value:!0});var i=s("ggNv"),o=s.n(i),n=s("XQvX"),l=s("VU/8"),r=a,c=l(o.a,n.a,!1,r,"data-v-ed84d282",null);t.default=c.exports}});